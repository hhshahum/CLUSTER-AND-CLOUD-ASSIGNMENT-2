#format and mount volume
- name: Format Volume
  filesystem:
    fstype: ext4
    dev: /dev/vdb

- name: Create Mount Dir
  file:
    path: /mnt/data
    state: directory

- name: Mount Volume
  mount:
    path: /mnt/data
    src: /dev/vdb
    fstype: ext4
    state: mounted

- name: Change the Permission of directory '/mnt/data'
  file:
    path: /mnt/data
    mode: 0777
    recurse: yes
    state: directory


#install software
- name: Install pip3
  apt:
    name: ['python3-pip']
    state: latest
    update_cache: yes

- name: Update pip3
  pip:
    name: ['pip']
    state: latest
    executable: pip3

- name: Install couchdb package
  pip:
    name: ['couchdb']
    state: latest

- name: Install dos2unix
  apt:
    name: ['dos2unix']
    state: latest
